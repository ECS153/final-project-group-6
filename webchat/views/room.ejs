<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/public/assets/room.css">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>speakEZ</title>
    <script>
        const roomName = "<%= roomName %>"
        const members = "<%= members %>"
    </script>
    <script defer src="http://localhost:8008/socket.io/socket.io.js"></script>
    <script defer src="/public/client.js"></script>
</head>

<body>
<header>
    <h1>Chat Room: <%= roomName %></h1>
    <a href="/chat" class="button">Back</a>
</header>
<main>
    <div id="textContainer">
        <div id="message-container"></div>

        <div id="sendBox">
            <form id="send-container">
                <input type="text" id="message-input" placeholder="Type a message here..."></input>
                <!-- if send button is hit, -->
                <button type="submit" id="send-button">Send</button>
            </form>
        </div>
    </div>
    <div id="people">
        <p>People</p>
        <% Object.values(members).forEach(member =>{ %>
        <div>
            <%= member %><% }) %>
        </div>
    </div>
</main>

</body>
<script>
function updateScroll() {
    var element = document.getElementById("message-container");
    element.scrollTop = element.scrollHeight;
}
setInterval(updateScroll,1000);
</script>
</html>
